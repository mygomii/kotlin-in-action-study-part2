# π“ μ½”ν‹€λ¦°μ„ μ½”ν‹€λ¦°λ‹µκ² μ‚¬μ©ν•κΈ° 

<details>
<summary><strong>9.1 μ‚°μ  μ—°μ‚°μλ¥Ό μ¤λ²„λ΅λ“ν•΄μ„ μ„μμ ν΄λμ¤μ— λ€ν• μ—°μ‚°μ„ λ” νΈλ¦¬ν•κ² λ§λ“¤κΈ°</strong></summary>
  
- μ½”ν‹€λ¦°μ—μ„ κ΄€λ΅€λ¥Ό μ‚¬μ©ν•λ” κ°€μ¥ λ‹¨μν• μλ” μ‚°μ  μ—°μ‚°μ

## 9.1.1 plus, times, divide λ“±: μ΄ν•­ μ‚°μ  μ—°μ‚° μ¤λ²„λ΅λ”©

```kotlin
data class Point(val x: Int, val y: Int) {
    operator fun plus(other: Point): Point {
        return Point(x + other.x, y + other.y)
    }
}
```

```kotlin
fun main() {
	val p1 = Point(10, 20)
	val p2 = Point(30, 40)
	println(p1 + p2) // κΈ°νΈλ¥Ό μ“°λ©΄ plus ν•¨μκ°€ νΈμ¶ 
	// Point(x=40, y=60)
}
```

- `plus` ν•¨μ μ•μ— `operator` ν‚¤μ›λ“λ¥Ό λ¶™μ—¬μ•Ό ν•λ‹¤λ” μ 
- μ—°μ‚°μλ¥Ό μ¤λ²„λ΅λ”©ν•λ” ν•¨μ μ•μ—λ” λ°λ“μ‹ `operator` κ°€ μμ–΄μ•Όν•¨
- `operator` ν‚¤μ›λ“λ¥Ό λ¶™μ„μΌλ΅ μ¨ μ–΄λ–¤ ν•¨μκ°€ κ΄€λ΅€λ¥Ό λ”°λ¥΄λ” ν•¨μμ„μ„ λ…ν™•ν ν•  μ μμ
- μ‹¤μλ΅ κ΄€λ΅€μ—μ„ μ‚¬μ©ν•λ” ν•¨μ μ΄λ¦„μ„ μ‚¬μ©ν•λ” κ²½μ°λ¥Ό λ§‰μ•„μ¤
- **ν•¨μ μ΄λ¦„**(`plus`, `minus`, `times`, `div` λ“±)κ³Ό **`operator`** ν‚¤μ›λ“λ¥Ό λ§μ¶”λ©΄, ν‘μ¤€ μ—°μ‚°μ(`+`, `-`, `*`, `/`)λ¥Ό κ·Έλ€λ΅ μ‚¬μ© κ°€λ¥

## 9.1.2 μ—°μ‚°μ„ μ μ©ν• λ‹¤μμ— κ·Έ κ²°κ³Όλ¥Ό λ°”λ΅ λ€μ…: λ³µν•© μ—°μ‚°μ μ¤λ²„λ΅λ”©

- `plus` μ™€ κ°™μ€ μ—°μ‚°μλ¥Ό μ¤λ²„λ΅λ”©ν•λ©΄ μ½”ν‹€λ¦°μ€ `+` μ—°μ‚°μλΏ μ•„λ‹λΌ κ·Έμ™€ κ΄€λ ¨ μλ” μ—°μ‚°μμΈ `+=` λ„ μλ™μΌλ΅ ν•¨κ» μ§€μ› `+=` , `-=` λ“±μ μ—°μ‚°μλ” `λ³µν•© λ€μ… μ—°μ‚°μ`λΌκ³  λ¶€λ¦„

## 9.1.3 ν”Όμ—°μ‚°μκ°€ 1κ°λΏμΈ μ—°μ‚°μ: λ‹¨ν• μ—°μ‚°μ μ¤λ²„λ΅λ”©

- λ‹¨ν•­ μ—°μ‚°μλ¥Ό μ¤λ²„λ΅λ”©ν•λ” μ μ°¨λ„ μ΄ν•­ μ—°μ‚°μμ™€ λ§μ°¬κ°€μ§€
- λ―Έλ¦¬ μ •ν•΄μ§„ μ΄λ¦„μ ν•¨μλ¥Ό μ„ μ–Έν•λ©΄μ„ `operator` λ΅ ν‘μ‹ν•λ©΄ λ¨

```kotlin
data class Point(val x: Int, val y: Int) {
    // -point
    operator fun unaryMinus(): Point =
        Point(-x, -y)

    // ++point
    operator fun inc(): Point =
        Point(x + 1, y + 1)

    // --point
    operator fun dec(): Point =
        Point(x - 1, y - 1)
}
```

```kotlin
fun main() {
    val p = Point(3, 5)

    val neg = -p
    println(neg)   // Point(x=-3, y=-5)

    val p2 = p.inc()    // νΉμ€ ++p
    println(p2)   // Point(x=4, y=6)

    var p3 = p
    p3++
    println(p3)   // Point(x=4, y=6)

    val p4 = p3.dec()   // νΉμ€ --p3
    println(p4)   // Point(x=3, y=5)
}
```
</details>

<details>
<summary><strong>9.2 λΉ„κµ μ—°μ‚°μλ¥Ό μ¤λ²„λ΅λ”©ν•΄μ„ κ°μ²΄λ“¤ μ‚¬μ΄μ κ΄€κ³„λ¥Ό μ‰½κ² κ²€μ‚¬ </strong></summary>
	
- μ½”ν‹€λ¦°μ—μ„λ” μ‚°μ  μ—°μ‚°μμ™€ λ§μ°¬κ°€μ§€λ΅ κΈ°λ³Έ νƒ€μ… κ°’λΏ μ•„λ‹λΌ λ¨λ“  κ°μ²΄μ— λ€ν•΄ λΉ„κµ μ—°μ‚°(`==`, `!=`, `>`, `<`) λ“±λ¥Ό μν–‰ν•  μ μμ
- `equals`, `compareTo` λ¥Ό νΈμ¶ν•΄μ•Ό ν•λ” μλ°”μ™€ λ‹¬λ¦¬ μ½”ν‹€λ¦°μ—μ„λ”  `==` λΉ„κµ μ—°μ‚°μλ¥Ό μ§μ ‘ μ‚¬μ©ν•  μ μμ–΄ λΉ„κµ μ½”λ“κ°€ λ” κ°„κ²°ν•λ©° μ΄ν•΄ν•κΈ° μ‰¬μ›€

## 9.2.1 λ™λ“±μ„± μ—°μ‚°μ: equals

- μ½”ν‹€λ¦°μ `==` μ—°μ‚°μλ” λ‚΄λ¶€μ μΌλ΅ `a?.equals(b) ?: (b === null)` μ„ νΈμ¶
- **μ°Έμ΅° λ™μΌμ„±**μ„ μ§μ ‘ λΉ„κµν•λ ¤λ©΄ `===` ,`!==` μ‚¬μ©

## 9.2.2 μμ„ μ—°μ‚°μ: compareTo (<, >, β‰¤, β‰¥)

- **`operator fun compareTo(other): Int`** μ„ κµ¬ν„
- **μ–‘μ/0/μμ** λ°ν™μ— λ”°λΌ <, ==, > κ°™μ€ μ—°μ‚°μ μ§€μ›
- **λ©¤λ²„ ν•¨μ**λ΅ μ§μ ‘ κµ¬ν„ν•κ±°λ‚, **ν™•μ¥ ν•¨μ**λ΅λ„ ν™μ© κ°€λ¥
</details>


<details>
<summary><strong>9.3  μ»¬λ ‰μ…κ³Ό λ²”μ„μ— λ€ν•΄ μ“Έ μ μλ” κ΄€λ΅€</strong></summary>
- μ»¬λ ‰μ…μ„ λ‹¤λ£° λ• κ°€μ¥ λ§μ΄ μ“°λ” μ—°μ‚°μ€ μΈλ±μ¤λ¥Ό μ‚¬μ©ν•΄ μ›μ†λ¥Ό μ½κ±°λ‚ μ“°λ” μ—°μ‚°κ³Ό μ–΄λ–¤ κ°’μ΄ μ»¬λ ‰μ…μ— μ†ν•΄ μλ”μ§€ κ²€μ‚¬ν•λ” μ—°μ‚°μ„

## 9.3.1 μΈλ±μ¤λ΅ μ›μ† μ ‘κ·Ό: getκ³Ό set

- μ½”ν‹€λ¦° μ»¬λ ‰μ…(`List`, `Map` λ“±)λ” `operator fun get(index)` μ™€ `operator fun set(index, value`) λ¥Ό μ κ³µν•΄, μΈλ±μ¤ μ—°μ‚°μ([]) λ¬Έλ²•μ„ μ‚¬μ©ν•  μ μκ² ν•΄ μ¤
- **λ¶λ³€ μ»¬λ ‰μ… vs κ°€λ³€ μ»¬λ ‰μ…**
    - `List<T>` λ” μ½κΈ° μ „μ©μ΄λ―€λ΅ `get(index)` λ§ μ§€μ›
    - `MutableList<T>` λ” `get` κ³Ό `set` λ‘ λ‹¤ μ§€μ›ν•΄ μ”μ† λ³€κ²½μ΄ κ°€λ¥

## 9.3.2 μ–΄λ–¤ κ°μ²΄κ°€ μ»¬λ ‰μ…μ— λ“¤μ–΄μλ”μ§€ κ²€μ‚¬: in κ΄€λ΅€

- **`contains` μ—°μ‚°μ ν•¨μ**
- μ»¬λ ‰μ…(List, Set, Map λ“±)μ—λ” `operator fun contains(element: T): Boolean` κ°€ μ •μλμ–΄ μμ–΄, νΉμ • μ›μ†κ°€ μ»¬λ ‰μ…μ— ν¬ν•¨λμ–΄ μλ”μ§€λ¥Ό κ²€μ‚¬ν•  μ μμ
- `in` μ—°μ‚°μλ” λ‚΄λ¶€μ μΌλ΅ `contains`νΈμ¶

```kotlin
val nums = listOf(1, 2, 3)
println(2 in nums)    // nums.contains(2) β†’ true
println(5 !in nums)   // !nums.contains(5) β†’ true
```

- **λ¶λ³€ vs κ°€λ³€ μ»¬λ ‰μ…**
    - `List<T>` / `Set<T>` λ“± μ½κΈ° μ „μ© μ»¬λ ‰μ…μ—μ„λ„ `contains` λ§ μμ–΄ `in` μ—°μ‚°μ΄ κ°€λ¥
    - `MutableList<T>` / `MutableSet<T>` μ—λ„ λ™μΌν•κ² `in` / `!in` μ‚¬μ© κ°€λ¥.
- **Mapμ ν‚¤ κ²€μ‚¬**
    - `Map<K, V>` μ κ²½μ° `operator fun contains(key: K): Boolean` κ°€ ν‚¤ κ²€μ‚¬μ©μΌλ΅ μ •μλμ–΄ μμ
    
    ```kotlin
    val map = mapOf("a" to 1, "b" to 2)
    if ("a" in map) { /* true */ }
    ```
    
- **λ¬Έμμ—΄κ³Ό λ²”μ„μ—λ„ μ μ©**

```kotlin
"ell" in "Hello"  // true
```

## 9.3.3 κ°μ²΄λ΅λ¶€ν„° λ²”μ„ λ§λ“¤κΈ°: rangeToμ™€ rangeUtil κ΄€λ΅€

- `a..b` κµ¬λ¬Έμ€ λ‚΄λ¶€μ μΌλ΅ `a.rangeTo(b)`λ¥Ό νΈμ¶
- ex) `a..b` β†’ `a.rangeTo(b)` (λκ°’ ν¬ν•¨)
- `a until b` β†’ λκ°’ λ―Έν¬ν•¨ λ²”μ„
- μ»¤μ¤ν…€ νƒ€μ…μ— rangeTo/untilμ„ μ •μν•λ©΄ for (x in β€¦) κ°™μ€ λ²”μ„ λ°λ³µμ„ μ§μ ‘ μ§€μ›ν•  μ μμµλ‹λ‹¤.

## 9.3.4 μμ‹ μ νƒ€μ…μ— λ€ν•΄ λ£¨ν”„ μν–‰: iterator κ΄€λ΅€

- **for-λ£¨ν”„μ™€ iterator**
    - Kotlinμ for (item in collection) κµ¬λ¬Έμ€ λ‚΄λ¶€μ μΌλ΅ λ‹¤μ κ³Όμ •μ„ κ±°μΉ¨
        - λ€μƒ κ°μ²΄μ— `operator fun iterator(): Iterator<T>` κ°€ μλ”μ§€ ν™•μΈ
        - λ°ν™λ `Iterator<T>`μ—μ„ `hasNext()`μ™€ `next()`λ¥Ό λ°λ³µ νΈμ¶
- **Iterator μΈν„°νμ΄μ¤**
    
    ```kotlin
    interface Iterator<out T> {
      fun hasNext(): Boolean
      fun next(): T
    }
    ```
    
    - `hasNext()`κ°€ `true`μΈ λ™μ• `next()`λ¥Ό νΈμ¶ν•΄ μμ°¨μ μΌλ΅ μ”μ†λ¥Ό κΊΌλƒ„
</details>

<details>
<summary><strong>9.4 component ν•¨μλ¥Ό μ‚¬μ©ν•΄ κµ¬μ΅° λ¶„ν•΄ μ„ μ–Έ μ κ³µ</strong></summary>
	
- κµ¬μ΅° λ¶„ν•΄ μ„ μ–Έλ¥Ό μ‚¬μ©ν•λ©΄ λ³µν•©μ μΈ κ°’μ„ λ¶„ν•΄ν•΄μ„ λ³„λ„μ μ—¬λ¬ μμ—­ λ³€μλ¥Ό ν•κΊΌλ²μ— μ΄κΈ°ν™”ν•  μ μμ
- λ³µν•©μ μΈ κ°’μ„ **μ—¬λ¬ λ³€μλ΅ ν•κΊΌλ²μ— λ¶„ν•΄**ν•΄μ„ μ΄κΈ°ν™”ν•λ” λ¬Έλ²•
- μ: `val (name, age) = person`

---

- **μ‘λ™ μ›λ¦¬**
    - κµ¬μ΅° λ¶„ν•΄ μ„ μ–Έμ€ `componentN()` ν•¨μλ“¤μ„ νΈμ¶ν•μ—¬ λ™μ‘ν•¨.
    - μλ¥Ό λ“¤μ–΄, `val (a, b) = obj` β†’ λ‚΄λ¶€μ μΌλ΅ `obj.component1()`κ³Ό `obj.component2()` νΈμ¶λ¨.

---

- **μ‚¬μ© μ΅°κ±΄**
    - ν΄λμ¤μ— `componentN()` ν•¨μκ°€ μ •μλμ–΄ μμ–΄μ•Ό ν•¨.
    - **`data class`**λ” μλ™μΌλ΅ `componentN()` ν•¨μλ¥Ό μƒμ„±ν•΄μ¤.

```kotlin
class Point(val x: Int, val y: Int) {
    operator fun component1() = x
    operator fun component2() = y
}

val (x, y) = Point(10, 20)
```
</details>

<details>
<summary><strong>9.5 ν”„λ΅νΌν‹° μ ‘κ·Όμ λ΅μ§ μ¬ν™μ©: μ„μ„ ν”„λ΅νΌν‹°</strong></summary>
	
## 9.5.1 μ„μ„ ν”„λ΅νΌν‹°μ κΈ°λ³Έ λ¬Έλ²•κ³Ό λ‚΄λ¶€ λ™μ‘

- **ν”„λ΅νΌν‹°μ getter/setter λ΅μ§μ„ λ‹¤λ¥Έ κ°μ²΄μ— μ„μ„**ν•λ” λ°©μ‹
- κ³µν†µλ λ΅μ§μ„ μ¬μ‚¬μ©ν•  μ μμ–΄ μ¤‘λ³µ μ κ±°μ™€ μ½”λ“ κ°„κ²°ν™”μ— μ λ¦¬ν•¨

```kotlin
val property by delegate
```

β€Ά `delegate`λ” `getValue` / `setValue` ν•¨μλ¥Ό κ°€μ§„ κ°μ²΄μ—¬μ•Ό ν•¨

## 9.5.2 μ„μ„ ν”„λ΅νΌν‹° μ‚¬μ©: by lazy()λ¥Ό μ‚¬μ©ν• μ§€μ—° μ΄κΈ°ν™”

- μ§€μ—° μ΄κΈ°ν™”λ” κ°μ²΄μ μΌλ¶€λ¶„μ„ μ΄κΈ°ν™”ν•μ§€ μ•κ³  λ‚¨κ²¨λ’€λ‹¤κ°€ μ‹¤μ λ΅ κ·Έ λ¶€λ¶„μ κ°’μ΄ ν•„μ”ν•  κ²½μ° μ΄κΈ°ν™”ν•  λ• ν”ν μ“°μ΄λ” ν¨ν„΄

```kotlin
val name: String by lazy {
    println("κ³„μ‚° μ¤‘...")
    "Kotlin"
}
```

- **ν‘μ¤€ μ„μ„ ν”„λ΅νΌν‹° μΆ…λ¥**
    - `lazy` β†’ μ§€μ—° μ΄κΈ°ν™”
    - `observable` β†’ κ°’ λ³€κ²½ κ°μ§€
    - `vetoable` β†’ λ³€κ²½ μ΅°κ±΄ κ²€μ‚¬
    - `Delegates.notNull<T>()`β†’ λ°λ“μ‹ λ‚μ¤‘μ— μ΄κΈ°ν™”λΌμ•Ό ν•  κ°’μ— μ‚¬μ©
</details>

<hr>

<details>
<summary><strong>10.1 λ‹¤λ¥Έ ν•¨μλ¥Ό μΈμλ΅ λ°›κ±°λ‚ λ°ν™ν•λ” ν•¨μ μ •μ: κ³ μ°¨ ν•¨μ </strong></summary>
	
- μ½”ν‹€λ¦°μ—μ„λ” λλ‹¤λ‚ ν•¨μ μ°Έμ΅°λ¥Ό μ‚¬μ©ν•΄ ν•¨μλ¥Ό κ°’μΌλ΅ ν‘ν„ ν•  μ μμ

## 10.1.1 ν•¨μ νƒ€μ…μ€ λλ‹¤μ νλΌλ―Έν„° νƒ€μ…κ³Ό λ°ν™ νƒ€μ…μ„ μ§€μ •ν•λ‹¤.

- ν•¨μλ¥Ό μΈμλ΅ λ°›κ±°λ‚, ν•¨μλ¥Ό λ°ν™ν•λ” ν•¨μλ¥Ό κ³ μ°¨ ν•¨μλΌκ³  ν•¨
- μ½”ν‹€λ¦°μ—μ„λ” λλ‹¤μ‹μ΄λ‚ ν•¨μ μ°Έμ΅°λ¥Ό ν†µν•΄ ν•¨μλ¥Ό κ°’μ²λΌ μ‚¬μ©ν•  μ μμ
- λλ‹¤μ λ§¤κ°λ³€μ νƒ€μ…κ³Ό λ°ν™ νƒ€μ…μ„ λ…μ‹ν•μ—¬ μ‚¬μ©.

```kotlin
val sum: (Int, Int) -> Int = { x, y -> x + y }
```

## 10.1.2 μΈμλ΅ μ „λ‹¬ λ°›μ€ ν•¨μ νΈμ¶

- κ³ μ°¨ ν•¨μμ—μ„ ν•¨μλ¥Ό μΈμλ΅ μ „λ‹¬λ°›μ•λ‹¤λ©΄, ν•΄λ‹Ή ν•¨μλ¥Ό μΌλ° ν•¨μμ²λΌ νΈμ¶ν•λ©΄ λ¨
- μ „λ‹¬λ°›μ€ ν•¨μλ„ ()λ¥Ό λ¶™μ—¬ νΈμ¶ν•  μ μμ

```kotlin
fun twoAndThree(operation: (Int, Int) -> Int): Int {
    return operation(2, 3)
}

val sum = twoAndThree { a, b -> a + b }     // 5
val product = twoAndThree { a, b -> a * b } // 6
```

- `operation`μ΄λΌλ” νλΌλ―Έν„°λ” `(Int, Int) -> Int` νƒ€μ…μ ν•¨μ
- `operation(2, 3)`μ²λΌ μΌλ° ν•¨μμ²λΌ νΈμ¶ κ°€λ¥

## 10.1.3 μλ°”μ—μ„ μ½”ν‹€λ¦° ν•¨μ νƒ€μ… μ‚¬μ©

- μ½”ν‹€λ¦°μ ν•¨μ νƒ€μ…μ€ Javaμ ν•¨μν• μΈν„°νμ΄μ¤μ™€ νΈν™λ¨.
- Javaμ—μ„λ” μ½”ν‹€λ¦° ν•¨μ νƒ€μ…μ„ μ§μ ‘ μ‚¬μ©ν•  μλ” μ—†μ§€λ§, Function μΈν„°νμ΄μ¤λ‚ λλ‹¤λ΅ μ „λ‹¬ κ°€λ¥ν•¨.

```kotlin
// kotlin 
fun process(operation: (Int, Int) -> Int): Int {
    return operation(4, 2)
}
```

```java
//java
int result = KotlinKt.process((a, b) -> a + b);
```

- SAM λ³€ν™ (Single Abstract Method)
    - μλ°”μ—μ„λ” ν•¨μν• μΈν„°νμ΄μ¤(λ©”μ„λ“κ°€ ν•λ‚μΈ μΈν„°νμ΄μ¤)λ¥Ό μ‚¬μ©ν•μ—¬ μ½”ν‹€λ¦° ν•¨μ νƒ€μ…μ„ μ „λ‹¬λ°›μ„ μ μμ
    - μλ°”μ λλ‹¤λ” μ΄λ° μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• μµλ… κ°μ²΄λ΅ μλ™ λ³€ν™λ¨ β†’ SAM λ³€ν™

```kotlin
// kotlin 
fun interface IntBinaryOp {
    fun apply(x: Int, y: Int): Int
}

fun compute(op: IntBinaryOp): Int = op.apply(10, 5)
```

```java
// java
int result = KotlinKt.compute((x, y) -> x * y);
```

## 10.1.4 ν•¨μ νƒ€μ…μ νλΌλ―Έν„°μ— λ€ν•΄ κΈ°λ³Έκ°’μ„ μ§€μ •ν•  μ μκ³ , λ„μ΄ λ  μλ„ μλ‹¤.

- ν•¨μ νƒ€μ… νλΌλ―Έν„°λ„ κΈ°λ³Έκ°’ μ§€μ • κ°€λ¥
    - μΌλ° νλΌλ―Έν„°μ²λΌ ν•¨μ νƒ€μ… νλΌλ―Έν„°μ—λ„ κΈ°λ³Έκ°’μ„ μ„¤μ •ν•  μ μμ
    - ν•¨μ μΈμλ¥Ό μƒλµν•λ©΄ κΈ°λ³ΈμΌλ΅ μ§€μ •λ ν•¨μκ°€ μ‚¬μ©λ¨

```kotlin
fun greet(message: String, formatter: (String) -> String = { it.uppercase() }) {
    println(formatter(message))
}

greet("hello")                     // HELLO (κΈ°λ³Έκ°’ μ‚¬μ©)
greet("hello") { it.reversed() }  // olleh
```

- ν•¨μ νƒ€μ… νλΌλ―Έν„°λ„ nullable κ°€λ¥
    - ν•¨μ νƒ€μ… νλΌλ―Έν„°μ— `null`μ„ ν—μ©ν•  μλ„ μμ.
    - μ΄ κ²½μ°μ—λ” `null` μ²΄ν¬ ν›„ νΈμ¶ ν•„μ”

```kotlin
fun greetNullable(message: String, formatter: ((String) -> String)? = null) {
    val result = formatter?.invoke(message) ?: message
    println(result)
}

greetNullable("hello")                        // hello
greetNullable("hello") { it.capitalize() }    // Hello
```

## 10.1.5 ν•¨μλ¥Ό ν•¨μμ—μ„ λ°ν™

- μ½”ν‹€λ¦°μ—μ„λ” **ν•¨μλ¥Ό λ°ν™κ°’μΌλ΅ μ‚¬μ©ν•  μ μμ**
- μ¦‰, **κ³ μ°¨ ν•¨μλ” ν•¨μλ¥Ό λ°ν™**ν•  μλ„ μμ
- λ°ν™ νƒ€μ…μ€ (νλΌλ―Έν„°) -> λ°ν™κ°’ ν•νƒμ **ν•¨μ νƒ€μ…**

```kotlin
fun operation(): (Int) -> Int {
    return { it * 2 }
}

val result = operation()(3)  // 6
```

- `operation()`μ€ `(Int) -> Int` νƒ€μ…μ ν•¨μλ¥Ό λ°ν™
- λ°ν™λ ν•¨μλ¥Ό μ¦‰μ‹ νΈμ¶: `operation()(3)`

## 10.1.6 λλ‹¤λ¥Ό ν™μ©ν•΄ μ¤‘λ³µμ„ μ¤„μ—¬ μ½”λ“ μ¬μ‚¬μ©μ„± λ†’μ΄κΈ°

- *κ³µν†µλ μ½”λ“ νλ¦„(ν…ν”λ¦Ώ)*μ€ μ μ§€ν•κ³ , λ‹¤λ¥Έ λ™μ‘λ§ λλ‹¤λ΅ μ „λ‹¬ν•μ—¬ μ¤‘λ³µ μ κ±°
- ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄μ„ λλ‹¤λ΅ κ°„κ²°ν•κ² κµ¬ν„ν•λ” λ°©μ‹

```kotlin
fun <T> withFileReader(file: File, block: (BufferedReader) -> T): T {
    return file.bufferedReader().use { reader ->
        block(reader)
    }
}
```

- `file.bufferedReader()`μ™€ `use {}`λ” **κ³µν†µ λ΅μ§**
- μ‹¤μ  λ™μ‘μ€ `block` λλ‹¤λ΅ μ „λ‹¬ λ°›μ

```kotlin
val lines = withFileReader(File("data.txt")) { reader ->
    reader.readLines()
}

val firstLine = withFileReader(File("data.txt")) { reader ->
    reader.readLine()
}
```
</details>

<details>
<summary><strong>10.2 μΈλΌμΈ ν•¨μλ¥Ό μ‚¬μ©ν•΄ λλ‹¤μ λ¶€κ°€ λΉ„μ© μ—†μ• κΈ° </strong></summary>
	
- λ³΄ν†µ λλ‹¤λ¥Ό μµλ… ν΄λμ¤λ΅ μ»΄νμΌν•λ‹¤κ³  μ„¤λ…
- κ·Έλ ‡μ§€λ§ λλ‹¤μ‹λ§λ‹¤ μƒλ΅μ΄ ν΄λμ¤κ°€ μƒκΈ°κ³  λλ‹¤κ°€ λ³€μλ¥Ό μΊ΅μ²ν• κ²½μ° λλ‹¤ μ •μκ°€ ν¬ν•¨λ μ½”λ“λ¥Ό νΈμ¶ν•λ” μ‹μ λ§λ‹¤ μƒλ΅μ΄ κ°μ²΄κ°€ μƒκΈ΄λ‹¤λ” λ»μ΄λΌλ” μ‚¬μ‹¤
- μ΄λ΅ μΈν•΄ λ¶€κ°€ λΉ„μ©μ΄ λ“¬
- λ”°λΌμ„ λλ‹¤λ¥Ό μ‚¬μ©ν•λ” κµ¬ν„μ€ λ‘κ°™μ€ μ½”λ“λ¥Ό μ§μ ‘ μ‹¤ν–‰ν•λ” ν•¨μλ³΄λ‹¤ μ  ν¨μ¨ μ 

## 10.2.1 μΈλΌμ΄λ‹μ΄ μ‘λ™ν•λ” λ°©μ‹

- μ–΄λ–¤ ν•¨μλ¥Ό `inline`μΌλ΅ μ„ μ–Έν•λ©΄ . κ·Έ ν•¨μμ λ³Έλ¬Έμ΄ μΈλΌμΈμ΄ λ¨
- λ‹¤λ¥Έ λ§λ΅ ν•λ©΄ ν•¨μλ¥Ό νΈμ¶ν•λ” μ½”λ“λ¥Ό ν•¨μλ¥Ό νΈμ¶ν•λ” λ°”μ΄νΈμ½”λ“ μ¬μ‹ μ— ν•¨μ λ³Έλ¬Έμ„ λ²μ—­ν• λ°”μ΄νΈμ½”λ“λ΅ μ»΄νμΌ ν•λ‹¤λ” λ»

```kotlin
inline fun <T> synchronized(lock: Lock, action: () -> T): T {
  lock.lock()
  try {
    return action()
  } finally {
    lock.unloack()
  }
}

fun main() {
   val l = ReentrantLock()
   synchronized(1) {
   // 
   }
}
```

- μλ°”μ—μ„λ” μ„μμ κ°μ²΄ λ€ν•΄ `synchronized` λ¥Ό μ‚¬μ©ν•  μ μμ§€λ§ μ΄ν•¨μλ” `Lock` ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μ”κµ¬ν•λ‹¤λ” μ 

## 10.2.2 μΈλΌμΈ ν•¨μμ μ μ•½

- **μ¬κ·€ νΈμ¶(recursion) κΈμ§€**
    - μ§μ ‘(recursive) νΉμ€ κ°„μ ‘(recursive)μΌλ΅ μκΈ° μμ‹ μ„ νΈμ¶ν•  μ μ—†μ
    - μ»΄νμΌλ¬κ°€ νΈμ¶ μ§€μ μ— ν•¨μ λ³Έλ¬Έμ„ λ¬΄ν•ν λ³µμ‚¬ν•κ² λμ–΄ μ½”λ“ ν½μ°½(infinite inlining)μ΄ λ°μƒν•κΈ° λ•λ¬Έ
- **κ°€μƒ(virtual) ν•¨μλ΅ μ‚¬μ©ν•  μ μ—†μ**
    - `open`, `abstract`, `override` ν‚¤μ›λ“λ¥Ό λ¶™μΈ ν•¨μλ” `inline`μΌλ΅ μ„ μ–Έν•  μ μ—†μ
    - μΈν„°νμ΄μ¤λ‚ μ¶”μƒ ν΄λμ¤μ λ©¤λ²„λ΅λ„ μ„ μ–Έν•  μ μ—†μΌλ©°, ν•­μƒ `final` μƒνƒμ—¬μ•Ό ν•¨
- **λ¦¬ν”λ ‰μ…(reflection) μ ν•**
    - μΈλΌμ΄λ‹λ ν•¨μ λ³Έλ¬Έμ€ μ‹¤μ  λ°”μ΄νΈμ½”λ“μ— ν•¨μ νΈμ¶ ν•νƒλ΅ λ‚¨μ•„ μμ§€ μ•κΈ° λ•λ¬Έμ—, λ°νƒ€μ„μ— :: μ—°μ‚°μλ΅ μ°Έμ΅°ν•κ±°λ‚ `kotlin.reflect API`λ΅ νΈμ¶ν•  μ μ—†μ
- **λλ‹¤ νλΌλ―Έν„°μ λ°ν™(return) μ μ•½**
    - `inline` ν•¨μ μ•μ—μ„ λ„μ–΄μ¨ λλ‹¤ λ‚΄μ—μ„λ” β€*λΉ„μ§€μ—­(non-local) λ°ν™*β€ (return without label) μ΄ κ°€λ¥
    - ν•μ§€λ§ `noinline` μΌλ΅ ν‘μ‹λ λλ‹¤μ—λ” λΉ„μ§€μ—­ λ°ν™μ΄ λ¶κ°€λ¥ν•λ©°, `crossinline` μ„ λ¶™μ΄λ©΄ β€non-local returnβ€ μμ²΄κ°€ κΈμ§€λ©λ‹λ‹¤.
- **μ§€μ—­(local) ν΄λμ¤Β·ν•¨μ μΈλΌμ΄λ‹ λ¶κ°€**
    - `inline` ν•¨μ λ‚΄λ¶€μ— μ •μλ μ§€μ—­ ν΄λμ¤λ‚ μ§€μ—­ ν•¨μλ” μΈλΌμ΄λ‹λμ§€ μ•μ
    - `inline` ν•¨μλ” μ–΄λ””κΉμ§€λ‚ νΈμ¶ μ§€μ μ— β€λ³Έλ¬Έβ€λ§ λ³µμ‚¬ν•΄ λ„£μΌλ―€λ΅, μ§€μ—­ μ„ μ–Έλ¶€ μ „μ²΄λ¥Ό κ°€μ Έκ° μλ” μ—†μ
</details>


<details>
<summary><strong>10.3 λλ‹¤μ—μ„ λ°ν™: κ³ μ°¨ ν•¨μμ—μ„ νλ¦„ μ μ–΄</strong></summary>
	
## 10.3.1 λλ‹¤ μ•μ retrun λ¬Έ: λλ‹¤λ¥Ό λ‘λ¬μ‹Ό ν•¨μμ—μ„ λ°ν™

```kotlin
inline fun perform(times: Int, action: (Int) -> Unit) {
    for (i in 1..times) {
        action(i)
    }
    println("perform λ")  // μ΄ μ½”λ“λ”, λλ‹¤μ—μ„ λΉ„μ§€μ—­ λ°ν™μ΄ μΌμ–΄λ‚λ©΄ μ‹¤ν–‰λμ§€μ•μ 
}

fun foo() {
    perform(5) { i ->
        if (i == 3) return        // non-local return: foo()λ¥Ό μ¦‰μ‹ μΆ…λ£
        println("i = $i")
    }
    println("foo λ")             // μ΄ μ¤„μ€ νΈμ¶λμ§€ x 
}

fun main() {
    foo()
    println("main κ³„μ† μ‹¤ν–‰")    // foo()κ°€ returnμΌλ΅ λ°”λ΅ λ‚κ°€λ²„λ ΈκΈ° λ•λ¬Έμ—, μ—¬μ „ν μ‹¤ν–‰
}
```

## 10.3.2 λλ‹¤λ΅λ¶€ν„° λ°ν™: λ μ΄λΈ”μ„ μ‚¬μ©ν• return

- `inline κ³ μ°¨ ν•¨μ`μ— λ„κΈ΄ λλ‹¤μ—μ„ `return`μ„ ν•λ©΄ κΈ°λ³Έμ μΌλ΅ **λΉ„μ§€μ—­ λ°ν™(non-local return)** μΌλ΅ λ™μ‘ν•΄, λλ‹¤λ¥Ό κ°μ‹Ό ν•¨μ μ „μ²΄κ°€ μΆ…λ£λ¨
- κ·Έλ°λ° β€λλ‹¤ λ‚΄λ¶€λ§ μΆ…λ£μ‹ν‚¤κ³  μ‹¶μ„ λ•β€ λ” **λ μ΄λΈ”(label)** μ„ λ¶™μΈ return μ„ μ‚¬μ©ν•¨

```kotlin
inline fun perform(times: Int, action: (Int) -> Unit) {
    for (i in 1..times) {
        action(i)
    }
    println("perform λ")
}

fun exampleLabelReturn() {
    perform(5) lambda@{ i ->
        if (i == 3) return@lambda   // μ΄ returnμ€ λλ‹¤(lambda@)λ§ μΆ…λ£
        println("i = $i")
    }
    println("exampleLabelReturn λ")  // μ΄ μ¤„λ„ μ‹¤ν–‰λ¨
}

fun main() {
    exampleLabelReturn()
}
```

## 10.3.3 μµλ… ν•¨μ: κΈ°λ³Έμ μΌλ΅ λ΅μ»¬ return

- `inline` ν•¨μμ— λ„κ²¨μ¤„ λ• λλ‹¤ λ€μ‹  **μµλ… ν•¨μ**(anonymous function)λ¥Ό μ‚¬μ©ν•λ©΄, κ·Έ μ•μ `return`μ€ μ–Έμ λ‚ **λ΅μ»¬ λ°ν™(local return)** μΌλ΅ λ™μ‘
- μµλ… ν•¨μ λ‚΄λ¶€μ—μ„ returnμ΄ νΈμ¶λλ©΄ **μµλ… ν•¨μ μμ²΄λ§** λΉ μ Έλ‚κ°€κ³ , μ΄λ¥Ό κ°μ‹Ό νΈμ¶ ν•¨μλ‚ μƒμ„ ν•¨μ μ „μ²΄λ” μΆ…λ£λμ§€ μ•μ

```kotlin
inline fun perform(times: Int, action: (Int) -> Unit) {
    for (i in 1..times) {
        action(i)
    }
    println("perform λ")
}

fun exampleAnonymousFunction() {
    perform(5, fun(i: Int) {
        if (i == 3) {
            println("i == 3: μµλ… ν•¨μμ—μ„ return")  
            return    //  λ΅μ»¬ λ°ν™: μµλ… ν•¨μλ§ μΆ…λ£
        }
        println("i = $i")
    })
    println("exampleAnonymousFunction λ")  // μ΄ μ¤„λ„ μ •μƒ μ‹¤ν–‰
}

fun main() {
    exampleAnonymousFunction()
}

/*
i = 1
i = 2
i == 3: μµλ… ν•¨μμ—μ„ return
i = 4
i = 5
perform λ
exampleAnonymousFunction λ
*/
```
</details>

<hr>
<details>
<summary><strong>11.1 νƒ€μ… μΈμλ¥Ό λ°›λ” νƒ€μ… λ§λ“¤κΈ°: μ λ„¤λ¦­ νƒ€μ… νλΌλ―Έν„°</strong></summary>
	
- μ λ„¤λ¦­μ¤λ¥Ό μ‚¬μ©ν•λ©΄ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ°›λ” νƒ€μ…μ„ μ •μν•  μ μμ

## 11.1.1 μ λ„¤λ¦­ νƒ€μ…κ³Ό ν•¨κ» λ™μ‘ν•λ” ν•¨μμ™€ ν”„λ΅νΌν‹°

- μΌλ° ν΄λμ¤μ™€ λ§μ°¬κ°€μ§€λ΅, μ λ„¤λ¦­ ν΄λμ¤ μ•μ λ©¤λ²„ ν•¨μ μ‹κ·Έλ‹μ²μ— Tλ¥Ό λ§μκ» μ“Έ μ μμ

```kotlin
class Box<T>(private val value: T) {
    // Tλ¥Ό λ°ν™ν•λ” ν•¨μ
    fun getValue(): T = value

    // Tλ¥Ό νλΌλ―Έν„°λ΅ λ°›λ” ν•¨μ
    fun replace(newValue: T): Box<T> = Box(newValue)
}
```

## 11.1.2 μ λ„¤λ¦­ ν΄λμ¤λ¥Ό ν™‘ν™”μ‚΄κ΄„νΈ κµ¬λ¬Έμ„ μ‚¬μ©ν•΄ μ„ μ–Έν•λ‹¤

- ν΄λμ¤Β·μΈν„°νμ΄μ¤Β·ν•¨μ μ΄λ¦„ λ’¤μ— <T>(λλ” <A, B> λ“±)λ΅ νƒ€μ… νλΌλ―Έν„° μ„ μ–Έ. μƒμ„± μ‹ <Int>μ²λΌ λ…μ‹ν•κ±°λ‚, νƒ€μ… μ¶”λ΅ μΌλ΅ μƒλµ κ°€λ¥

```kotlin
// μ(pair)μ„ λ‹΄λ” μ λ„¤λ¦­ ν΄λμ¤
class PairBox<A, B>(val first: A, val second: B)

// ν•¨μμ—λ„ μ λ„¤λ¦­ μ„ μ–Έ κ°€λ¥
fun <T> singleton(item: T): List<T> = listOf(item)

// μ‚¬μ© μ
val p: PairBox<String, Int> = PairBox("age", 30)
val list = singleton(true)     // List<Boolean>
```

## 11.1.3 μ λ„¤λ¦­ ν΄λμ¤λ‚ ν•¨μκ°€ μ‚¬μ©ν•  μ μλ” νƒ€μ… μ ν•: νƒ€μ… νλΌλ―Έν„° μ μ•½

- SuperType λ¬Έλ²•μΌλ΅ Tκ°€ νΉμ • νƒ€μ…(λλ” μΈν„°νμ΄μ¤)μ„ μƒμ†/κµ¬ν„ν•λ„λ΅ μ ν•. where μ λ΅ λ‹¤μ¤‘ μ μ•½λ„ κ°€λ¥.

```kotlin
// Comparableμ„ κµ¬ν„ν• νƒ€μ…λ§ ν—μ©ν•λ” μ •λ ¬ λ¦¬μ¤νΈ
class SortedList<T : Comparable<T>> {
    private val elements = mutableListOf<T>()
    fun add(item: T) {
        elements.add(item)
        elements.sort()
    }
    fun all(): List<T> = elements
}

// Number νƒ€μ…λ§ ν—μ©ν•λ” ν•¨μ
fun <T : Number> half(value: T): Double = value.toDouble() / 2

// μ‚¬μ© μ
val sl = SortedList<Int>()
sl.add(5); sl.add(2); sl.add(8)
println(sl.all())           // [2, 5, 8]
println(half(9))            // 4.5
```

## 11.1.4 λ…μ‹μ μΌλ΅ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„μ΄ λ  μ μ—†λ” νƒ€μ…μΌλ΅ ν‘μ‹ν•΄μ„ λ„μ΄ λ μ μλ” νƒ€μ… μΈμ μ μ™Έμ‹ν‚¤κΈ°

- λ³Έ <T>λ” nullable(Any?)λ„ ν—μ©. T : Anyλ΅ μ ν•ν•΄ non-null νƒ€μ…λ§ λ°›λ„λ΅ μ„¤μ •

```kotlin
// nullable ν—μ© λ²„μ „: Box<String?> κ°€λ¥
class NullableBox<T>(val value: T)

// non-null μ „μ© λ²„μ „: Box<String?> λ¶κ°€
class NotNullBox<T : Any>(val value: T)

// μ‚¬μ© μ
val nb1 = NullableBox<String?>(null)   // ν—μ©
// val nb2 = NotNullBox<String?>(null) // μ»΄νμΌ μ—λ¬!
val nb3 = NotNullBox("Hello")         // OK
```
</details>

<details>
<summary><strong>11.2 μ‹¤ν–‰ μ‹μ  μ λ„¤λ¦­μ¤ λ™μ‘: μ†κ±°λ νƒ€μ… νλΌλ―Έν„°μ™€ μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°</strong></summary>
	
## 11.2.1 μ‹¤ν–‰ μ‹μ μ— μ λ„¤λ¦­ ν΄λμ¤μ νƒ€μ… μ •λ³΄λ¥Ό μ°Ύμ„ λ• ν•κ³„: νƒ€μ… κ²€μ‚¬μ™€ μΊμ¤ν…

- μ λ„¤λ¦­μ€ μ»΄νμΌ μ‹μ μ—λ§ νƒ€μ… μ •λ³΄λ¥Ό μ μ§€ν•κ³ , μ‹¤ν–‰ μ‹μ μ—λ” νƒ€μ… μ •λ³΄κ°€ μ§€μ›μ§ μ΄κ±Έ `νƒ€μ… μ†κ±°(Type Erasure)` λΌκ³  ν•λ‹¤.
- λ”°λΌμ„ `List<String>`κ³Ό `List<Int>`λ” μ‹¤ν–‰ μ‹μ μ—λ” λ™μΌν• νƒ€μ…(List) μΌλ΅ κ°„μ£Όλ¨
- μ΄λ΅ μΈν•΄ λ°μƒν•λ” λ€ν‘μ μΈ μ μ•½
    - νƒ€μ… κ²€μ‚¬ μ‹ κµ¬μ²΄μ μΈ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μ—†μ
    
    ```kotlin
    if (value is List<String>) // β κ²½κ³  λ°μƒ: μ‹¤ν–‰ μ‹μ μ— νƒ€μ… μ •λ³΄ μ—†μ
    ```
    
    - **μΊμ¤ν…** μ‹μ—λ„ νƒ€μ… νλΌλ―Έν„°λ” λ¬΄μ‹λ¨
    
    ```kotlin
    val strings = value as List<String> // κ²½κ³ λ” μ—†μ§€λ§, λ°νƒ€μ„μ— νƒ€μ… μ²΄ν¬ μ•λ¨
    ```
    

**???*μΊμ¤ν… μ‹ νƒ€μ… νλΌλ―Έν„° λ¬΄μ‹λ¨ β€” μ™ λ¬Έμ κ°€ λλ‚???***

- Kotlinμ **μ λ„¤λ¦­ νƒ€μ… νλΌλ―Έν„°λ” μ‹¤ν–‰ μ‹μ μ— μ§€μ›μ§** β†’ **νƒ€μ… μ†κ±°(Type Erasure)**

```kotlin
val strings = value as List<String>
```

- `value`κ°€ μ‹¤μ λ΅ `List<Any>`μ΄κ±°λ‚ `List<Int>`λΌλ„ μ»΄νμΌλ¬λ” κ²½κ³  μ—†μ΄ ν†µκ³Όν•¨
- ν•μ§€λ§ λ°νƒ€μ„μ—λ” `ClassCastException`μ΄ λ°μƒν•  μ μμ.
    
    μ™λƒλ©΄ *JVMμ€ valueκ°€ ListμΈμ§€κΉμ§€λ§ μ•κ³ *, κ·Έ μ•μ— μ–΄λ–¤ νƒ€μ…μ΄ λ“¤μ–΄μλ”μ§€λ” λ¨λ¦„.
    

- `as List<String>` κ°™μ΄ **κµ¬μ²΄μ μΈ μ λ„¤λ¦­ νƒ€μ…μΌλ΅ μΊμ¤ν…ν•λ” κ±΄ λ§¤μ° μ„ν—**ν•¨.
- *νƒ€μ… μ•μ „μ„±μ„ ν™•λ³΄ν•λ ¤λ©΄ β†’ reified ν‚¤μ›λ“ μ‚¬μ©ν•κ±°λ‚, νƒ€μ… μ²΄ν¬λ¥Ό ν”Όν•΄ λ΅μ§μ„ μ„¤κ³„ν•΄μ•Ό ν•¨*

## 11.2.2 μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” ν•¨μλ” νƒ€μ… μΈμλ¥Ό μ‹¤ν–‰ μ‹μ μ— μ–ΈκΈ‰ν•  μ μλ‹¤

- μ•μ—μ„ λ³Έ κ²ƒμ²λΌ, μΌλ°μ μΈ μ λ„¤λ¦­μ€ νƒ€μ… μ†κ±°(Type Erasure) λ•λ¬Έμ— μ‹¤ν–‰ μ‹μ μ— νƒ€μ… μ •λ³΄λ¥Ό μ• μ μ—†μ.
- κ·Έλ¬λ‚ inline ν•¨μμ νƒ€μ… νλΌλ―Έν„°μ— `reified`λ¥Ό λ¶™μ΄λ©΄, μ‹¤ν–‰ μ‹μ μ—λ„ νƒ€μ… μ •λ³΄λ¥Ό μ‚¬μ©ν•  μ μμ.
- μ΄λ¥Ό ν†µν•΄ λ‹¤μκ³Ό κ°™μ€ μ‘μ—…μ΄ κ°€λ¥ν•΄μ§:
    - `is T`
    - `T::class`
    - `T::class.java`

```kotlin
inline fun <reified T> printTypeName(value: Any) {
    if (value is T) {
        println("value is of type ${T::class.simpleName}")
    } else {
        println("value is NOT of type ${T::class.simpleName}")
    }
}
```

- ***μ™ inline μ΄ ν•„μ”ν• κΉ?***
    - `reified`λ” **νƒ€μ… μ •λ³΄λ¥Ό λ°”μ΄νΈμ½”λ“μ— ν¬ν•¨μ‹μΌμ•Ό ν•λ―€λ΅**, λ°λ“μ‹ ν•¨μκ°€ `inline` μ΄μ–΄μ•Ό ν•¨
    - `inline` μ—†μ΄ `reified`λ§ μ“°λ©΄ μ»΄νμΌ μ¤λ¥ λ°μƒ

## 11.2.3 ν΄λμ¤ μ°Έμ΅°λ¥Ό μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°λ΅ λ€μ‹ ν•¨μΌλ΅μ¨ java.lang.Class νλΌλ―Έν„° ν”Όν•κΈ°

- μλ°” μ¤νƒ€μΌμ ν•¨μμ—μ„ νƒ€μ… μ •λ³΄λ¥Ό μ‹¤ν–‰ μ‹μ μ— μ‚¬μ©ν•λ ¤λ©΄ λ³΄ν†µ μ΄λ ‡κ² ν•¨

```java
fun <T> loadService(clazz: Class<T>): T {
    return clazz.getDeclaredConstructor().newInstance()
}
```

- μ½”ν‹€λ¦°μ—μ„λ”Β `reified`λ¥Ό μ“°λ©΄Β `Class<T>`Β μ—†μ΄λ„ κ°€λ¥

```kotlin
inline fun <reified T> loadService(): T {
    return T::class.java.getDeclaredConstructor().newInstance()
}
```

- `T::class.java`λ” **μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„° Tκ°€ μμ–΄μ•Όλ§ κ°€λ¥**.
- λ” κ°„κ²°ν•κ³  νƒ€μ… μ•μ „ν•λ©°, **λ¶ν•„μ”ν• μΈμ μ „λ‹¬ μ—†μ΄ κµ¬ν„ κ°€λ¥**.

## 11.2.4 μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°κ°€ μλ” μ ‘κ·Όμ μ •μ

- Kotlinμ—μ„λ” ν”„λ΅νΌν‹°μ getterλ‚ setterμ— inline ν•¨μμ™€ reified νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μμ
- μ΄λ¥Ό ν†µν•΄ νΉμ • νƒ€μ…μΈμ§€ κ²€μ‚¬ν•κ±°λ‚ νƒ€μ…μ— λ”°λΌ λ™μ‘μ„ λ‹¤λ¥΄κ² ν•λ” λ΅μ§μ„ ν”„λ΅νΌν‹°μ²λΌ μ •μν•  μ μμ

```kotlin
val <T> List<T>.firstElementType: String
    inline get() = T::class.simpleName ?: "Unknown"
```

- ν•μ§€λ§ μ„ μ½”λ“λ” **μ»΄νμΌλμ§€ μ•μ**.
- μ™λƒν•λ©΄ **`reified`λ” inline ``ν•¨μμ—μ„λ§ μ‚¬μ©ν•  μ μλ”λ°**, μΌλ° ν”„λ΅νΌν‹°μ `getter`λ” `inline`μ΄ μ•„λ‹κΈ° λ•λ¬Έ

```kotlin
inline val <reified T> List<T>.typeName: String
    get() = T::class.simpleName ?: "Unknown"
```

- μ‹¤μ λ΅λ” **ν”„λ΅νΌν‹°μ²λΌ λ³΄μ΄μ§€λ§ `inline` ν•¨μ ν•νƒ**λ΅ λ§λ“¤μ–΄μ•Ό ν•¨
</details>

<details>
<summary><strong>11.3 λ³€μ„±μ€ μΈμλ¥Ό ν•¨μμ— λ„κ²¨λ„ μ•μ „ν•μ§€ νλ‹¨ν•κ² ν•΄μ¤€λ‹¤</strong></summary>

- λ³€μ„± κ°λ…μ€ `List<String>`κ³Ό `List<Any>` κ°™μ΄ κΈ°μ € νƒ€μ…μ΄ κ°™κ³  νƒ€μ… μΈμκ°€ λ‹¤λ¥Έ μ—¬λ¬ νƒ€μ…μ΄ μ–΄λ–¤ κ΄€κ³„κ°€ μλ”μ§€ μ„¤λ…ν•λ” κ°λ…

## 11.3.1 λ³€μ„±μ€ μΈμλ¥Ό ν•¨μμ— λ„κ²¨λ„ μ•μ „ν•μ§€ νλ‹¨ν•κ² ν•΄μ¤€λ‹¤.

- μ½”ν‹€λ¦°μ **μ λ„¤λ¦­μ€ κΈ°λ³Έμ μΌλ΅ κ³µλ³€(covariant)ν•μ§€ μ•μ**
    
    μλ¥Ό λ“¤μ–΄ List<String>μ€ List<Any>μ ν•μ„ νƒ€μ…μ΄ μ•„λ‹
    
- ν•μ§€λ§ μ°λ¦¬κ°€ μ•κ³  μλ” μΌλ°μ μΈ νƒ€μ… μƒμ† κ΄€κ³„(μ: String β†’ Any)μ™€ λ‹¬λ¦¬, μ λ„¤λ¦­ νƒ€μ…μ€ **νƒ€μ… μΈμκ°€ λ‹¬λΌμ§€λ©΄ λ¬΄κ΄€ν• νƒ€μ…μΌλ΅ κ°„μ£Όλ¨**

```kotlin
val strings = listOf("a", "b", "c")
printContents(strings) // μ»΄νμΌ μ¤λ¥ λ°μƒ!
```

- μ΄μ λ” List<Any>μ™€ List<String>μ€ λ³„κ°μ νƒ€μ…μΌλ΅ κ°„μ£Όλλ―€λ΅, νƒ€μ… μ•μ „μ„± λ³΄μ¥μ„ μ„ν•΄ ν—μ©λμ§€ μ•μ.

## 11.3.2 ν΄λμ¤, νƒ€μ…, ν•μ„ νƒ€μ…

- ν΄λμ¤μ™€ νƒ€μ…μ€ λ‹¤λ¦„ μ½”ν‹€λ¦°μ—μ„λ” ν• ν΄λμ¤κ°€ μ—¬λ¬ νƒ€μ…μ„ κ°€μ§ μ μμ
- νΉν μ λ„¤λ¦­ ν΄λμ¤μ κ²½μ°, νƒ€μ… μΈμμ— λ”°λΌ μ„λ΅ λ‹¤λ¥Έ β€νƒ€μ…β€μΌλ΅ κ°„μ£Όλ¨

```kotlin
class Box<T>(val value: T)
```

- `Box<Int>` , `Box<String>` , `Box<Any>`

## 11.3.3 κ³µλ³€μ„±μ€ ν•μ„ νƒ€μ… κ΄€κ³„λ¥Ό μ μ§€ν•λ‹¤.

- κ³µλ³€μ„±(covariance)
    - ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ μ§€λλ” κ²ƒμ„ μλ―Έν•¨.
    - μ¦‰, `String`μ΄ `Any`μ ν•μ„ νƒ€μ…μ΄λΌλ©΄, `Producer<String>`μ΄ `Producer<Any>`μ ν•μ„ νƒ€μ…μ΄ λλ„λ΅ ν—μ©ν•λ” κ²ƒ.

```kotlin
interface Producer<out T> {
    fun produce(): T
}
```

- `out T`λ” *Tλ¥Ό λ°ν™(μ¶λ ¥)*ν•λ” λ°λ§ μ‚¬μ©λλ‹¤λ” λ».
- μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” Tκ°€ μ¶λ ¥ μ „μ©(produced-only) μΌλ΅λ§ μ“°μΈλ‹¤λ” κ±Έ λ³΄μ¥ν•  μ μμΌλ©΄ κ³µλ³€μ„±μ„ ν—μ©ν•¨
- μ΄λ΅ μΈν•΄ ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ μ§€λ  μ μμ
- μ™ κ³µλ³€μ„±μ΄ ν•„μ”ν•κ°€?
    - νƒ€μ… μΈμκ°€ *μ½κΈ° μ „μ©(read-only)* μΌλ΅ μ‚¬μ©λ  λ•λ” κ³µλ³€μ„± μ μ©μ΄ μ™„μ „ μ•μ „
    - λ”°λΌμ„ `List<out T>`, `Sequence<out T>`μ²λΌ μ½”ν‹€λ¦°μ ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬μ—μ„λ„ μ κ·Ήμ μΌλ΅ μ‚¬μ©λ¨

## 11.3.4 λ°κ³µλ³€μ„±μ€ ν•μ„ νƒ€μ… κ΄€κ³„λ¥Ό λ’¤μ§‘λ”λ‹¤.

- λ°κ³µλ³€μ„±(Contravariance)μ΄λ€?
    - μΌλ°μ μΌλ΅ `String`μ€ `Any`μ ν•μ„ νƒ€μ…μ΄μ•Ό.
    - κ·Έλ°λ° `Consumer<Any>`κ°€ `Consumer<String>`μ ν•μ„ νƒ€μ…μ΄ λλ” κ±Έ λ°κ³µλ³€μ„±μ΄λΌ ν•λ‹¤.
    - μ¦‰, νƒ€μ… κ΄€κ³„κ°€ λ’¤μ§‘νλ‹¤λ” λ».
- μ™ νƒ€μ… κ΄€κ³„κ°€ λ’¤μ§‘νκΉ?
    - `Consumer<T>`λ” κ°’μ„ λ°›κΈ°λ§(consumes) ν•λ” μ—­ν• μ΄κΈ° λ•λ¬Έμ—
        
        β†’ λ” μΌλ°μ μΈ νƒ€μ…μ΄μ–΄μ•Ό μ•μ „ν•¨
        
    - μλ¥Ό λ“¤μ–΄ `Consumer<Any>`λ” λ¨λ“  νƒ€μ…μ„ λ°›μ„ μ μμΌλ‹, `Consumer<String>`μ΄ ν•„μ”ν• κ³³μ— λ„£μ–΄λ„ λ¬Έμ  μ—†μ΄ λ™μ‘ν•  μ μμ–΄.

```kotlin
interface Consumer<in T> {
    fun consume(item: T)
}
```

- `in T`λ” *Tλ¥Ό μ…λ ¥ μ „μ©(consume-only)* μΌλ΅ μ‚¬μ©ν•κ² λ‹¤λ” μλ―Έ
- λ°κ³µλ³€μ„± μ μ©μ„ ν†µν•΄ νƒ€μ… κ΄€κ³„λ¥Ό λ’¤μ§‘μ„ μ μκ² ν—μ©ν•¨

| **κµ¬λ¶„** | **ν‚¤μ›λ“** | **λ°©ν–¥μ„±** | **μ„¤λ…** |
| --- | --- | --- | --- |
| κ³µλ³€μ„± | out | ν•μ„ β†’ μƒμ„ | μ½κΈ° μ „μ©: Producer<String> β†’ Producer<Any> |
| λ°κ³µλ³€μ„± | in | μƒμ„ β†’ ν•μ„ | μ“°κΈ° μ „μ©: Consumer<Any> β†’ Consumer<String> |
| λ¬΄λ³€μ„± | μ—†μ | κ΄€κ³„ μ—†μ | Box<String> β‰  Box<Any> |
</details>
